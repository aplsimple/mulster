<!DOCTYPE html><html><head><meta charset="utf-8"/>
<title>trimmer reference</title>
<style>
/*
Copyright (c) 2009, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.7.0
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,button,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var,optgroup{font-style:inherit;font-weight:inherit;}del,ins{text-decoration:none;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:baseline;}sub{vertical-align:baseline;}legend{color:#000;}input,button,textarea,select,optgroup,option{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;}input,button,textarea,select{*font-size:100%;}body{font:13px/1.231 arial,helvetica,clean,sans-serif;*font-size:small;*font:x-small;}select,input,button,textarea,button{font:99% arial,helvetica,clean,sans-serif;}table{font-size:inherit;font:100%;}pre,code,kbd,samp,tt{font-family:monospace;*font-size:108%;line-height:100%;}body{text-align:center;}#doc,#doc2,#doc3,#doc4,.yui-t1,.yui-t2,.yui-t3,.yui-t4,.yui-t5,.yui-t6,.yui-t7{margin:auto;text-align:left;width:57.69em;*width:56.25em;}#doc2{width:73.076em;*width:71.25em;}#doc3{margin:auto 10px;width:auto;}#doc4{width:74.923em;*width:73.05em;}.yui-b{position:relative;}.yui-b{_position:static;}#yui-main .yui-b{position:static;}#yui-main,.yui-g .yui-u .yui-g{width:100%;}.yui-t1 #yui-main,.yui-t2 #yui-main,.yui-t3 #yui-main{float:right;margin-left:-25em;}.yui-t4 #yui-main,.yui-t5 #yui-main,.yui-t6 #yui-main{float:left;margin-right:-25em;}.yui-t1 .yui-b{float:left;width:12.30769em;*width:12.00em;}.yui-t1 #yui-main .yui-b{margin-left:13.30769em;*margin-left:13.05em;}.yui-t2 .yui-b{float:left;width:13.8461em;*width:13.50em;}.yui-t2 #yui-main .yui-b{margin-left:14.8461em;*margin-left:14.55em;}.yui-t3 .yui-b{float:left;width:23.0769em;*width:22.50em;}.yui-t3 #yui-main .yui-b{margin-left:24.0769em;*margin-left:23.62em;}.yui-t4 .yui-b{float:right;width:13.8456em;*width:13.50em;}.yui-t4 #yui-main .yui-b{margin-right:14.8456em;*margin-right:14.55em;}.yui-t5 .yui-b{float:right;width:18.4615em;*width:18.00em;}.yui-t5 #yui-main .yui-b{margin-right:19.4615em;*margin-right:19.125em;}.yui-t6 .yui-b{float:right;width:23.0769em;*width:22.50em;}.yui-t6 #yui-main .yui-b{margin-right:24.0769em;*margin-right:23.62em;}.yui-t7 #yui-main .yui-b{display:block;margin:0 0 1em 0;}#yui-main .yui-b{float:none;width:auto;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf,.yui-gc .yui-u,.yui-gd .yui-g,.yui-g .yui-gc .yui-u,.yui-ge .yui-u,.yui-ge .yui-g,.yui-gf .yui-g,.yui-gf .yui-u{float:right;}.yui-g div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first,.yui-ge div.first,.yui-gf div.first,.yui-g .yui-gc div.first,.yui-g .yui-ge div.first,.yui-gc div.first div.first{float:left;}.yui-g .yui-u,.yui-g .yui-g,.yui-g .yui-gb,.yui-g .yui-gc,.yui-g .yui-gd,.yui-g .yui-ge,.yui-g .yui-gf{width:49.1%;}.yui-gb .yui-u,.yui-g .yui-gb .yui-u,.yui-gb .yui-g,.yui-gb .yui-gb,.yui-gb .yui-gc,.yui-gb .yui-gd,.yui-gb .yui-ge,.yui-gb .yui-gf,.yui-gc .yui-u,.yui-gc .yui-g,.yui-gd .yui-u{width:32%;margin-left:1.99%;}.yui-gb .yui-u{*margin-left:1.9%;*width:31.9%;}.yui-gc div.first,.yui-gd .yui-u{width:66%;}.yui-gd div.first{width:32%;}.yui-ge div.first,.yui-gf .yui-u{width:74.2%;}.yui-ge .yui-u,.yui-gf div.first{width:24%;}.yui-g .yui-gb div.first,.yui-gb div.first,.yui-gc div.first,.yui-gd div.first{margin-left:0;}.yui-g .yui-g .yui-u,.yui-gb .yui-g .yui-u,.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u,.yui-ge .yui-g .yui-u,.yui-gf .yui-g .yui-u{width:49%;*width:48.1%;*margin-left:0;}.yui-g .yui-g .yui-u{width:48.1%;}.yui-g .yui-gb div.first,.yui-gb .yui-gb div.first{*margin-right:0;*width:32%;_width:31.7%;}.yui-g .yui-gc div.first,.yui-gd .yui-g{width:66%;}.yui-gb .yui-g div.first{*margin-right:4%;_margin-right:1.3%;}.yui-gb .yui-gc div.first,.yui-gb .yui-gd div.first{*margin-right:0;}.yui-gb .yui-gb .yui-u,.yui-gb .yui-gc .yui-u{*margin-left:1.8%;_margin-left:4%;}.yui-g .yui-gb .yui-u{_margin-left:1.0%;}.yui-gb .yui-gd .yui-u{*width:66%;_width:61.2%;}.yui-gb .yui-gd div.first{*width:31%;_width:29.5%;}.yui-g .yui-gc .yui-u,.yui-gb .yui-gc .yui-u{width:32%;_float:right;margin-right:0;_margin-left:0;}.yui-gb .yui-gc div.first{width:66%;*float:left;*margin-left:0;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf .yui-u{margin:0;}.yui-gb .yui-gb .yui-u{_margin-left:.7%;}.yui-gb .yui-g div.first,.yui-gb .yui-gb div.first{*margin-left:0;}.yui-gc .yui-g .yui-u,.yui-gd .yui-g .yui-u{*width:48.1%;*margin-left:0;}.yui-gb .yui-gd div.first{width:32%;}.yui-g .yui-gd div.first{_width:29.9%;}.yui-ge .yui-g{width:24%;}.yui-gf .yui-g{width:74.2%;}.yui-gb .yui-ge div.yui-u,.yui-gb .yui-gf div.yui-u{float:right;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf div.first{float:left;}.yui-gb .yui-ge .yui-u,.yui-gb .yui-gf div.first{*width:24%;_width:20%;}.yui-gb .yui-ge div.first,.yui-gb .yui-gf .yui-u{*width:73.5%;_width:65.5%;}.yui-ge div.first .yui-gd .yui-u{width:65%;}.yui-ge div.first .yui-gd div.first{width:32%;}#hd:after,#bd:after,#ft:after,.yui-g:after,.yui-gb:after,.yui-gc:after,.yui-gd:after,.yui-ge:after,.yui-gf:after{content:".";display:block;height:0;clear:both;visibility:hidden;}#hd,#bd,#ft,.yui-g,.yui-gb,.yui-gc,.yui-gd,.yui-ge,.yui-gf{zoom:1;}

body{margin:10px;}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong,dt{font-weight:bold;}optgroup{font-weight:normal;}abbr,acronym{border-bottom:1px dotted #000;cursor:help;}em{font-style:italic;}del{text-decoration:line-through;}blockquote,ul,ol,dl{margin:1em;}ol,ul,dl{margin-left:2em;}ol li{list-style:decimal outside;}ul li{list-style:disc outside;}dl dd{margin-left:1em;}th,td{border:1px solid #000;padding:.5em;}th{font-weight:bold;text-align:center;}caption{margin-bottom:.5em;text-align:center;}sup{vertical-align:super;}sub{vertical-align:sub;}p,fieldset,table,pre{margin-bottom:1em;}button,input[type="checkbox"],input[type="radio"],input[type="reset"],input[type="submit"]{padding:1px;}


/* Ruff default CSS */

body {
  /*max-width: 70em;*/
  margin: 0;
}

h1,h2 {
  color: #888888;
  margin-bottom: 0.5em;
  margin-top: 0em;
}

#ft {
  text-align: left;
  border-top: 1px solid #006666;
  color: #888888;
  margin-top: 10px;
}

.banner h2 {
  color: #006666;
}

#hd.banner {
 font-family: "Times New Roman", serif;
 font-size: 200%;
 line-height: 64px;
 border-bottom: thin solid #006666;
 color: #006666;
}

p.linkline {
    text-align: right;
    font-size: smaller;
    /*    margin-top: -1em; */
    margin-bottom: 0;
}

.tinylink {
    font-size: x-small;
    font-variant: normal;
    font-family: Arial, sans-serif;
    float: right;
    padding:2px;
}

h1 .tinylink a {
    color: white;
}

#bd {
font-family: Arial, sans-serif;
font-size: 108%;
}

div.navbox {
  /* margin-top: 1em; */
    background-color: #006666;
    color: white;
    padding: 3px 4px 2px 4px;
    font-family: Arial, sans-serif;
}

/* Note .navbox header css should be based on $header_levels */
.navbox h1, .navbox h2, .navbox h3, .navbox h4, .navbox h5 {
  font-size: 85%;
  margin: 0px;
  font-weight: normal;
}
.navbox h1 {
    font-weight: bold; /* Override */
}
.navbox h2 {
  padding-left: 1em;
}
.navbox h3 {
  padding-left: 2em;
}
.navbox h4 {
  padding-left: 2.5em;
  font-weight: normal;
}
.navbox h5 {
  padding-left: 3em;
  font-weight: normal;
}
.navbox hr {
  color: white;
  margin-top:0.1em;
  margin-bottom:0.1em;
}

.navbox a:link, .navbox a:visited, .navbox a:hover {
  text-decoration: none;
  color: white;
  background-color: #006666;
}

.navbox a:hover {
   font-weight: bold;
}

/* Tooltip text - see https://www.w3schools.com/css/css_tooltip.asp */
.tooltip {
    position: relative;
    /* display: inline-block; */
}

.tooltip .tooltiptext {
    width: 100%;
    font-weight: bold;
    background-color: white;
    color: #006666;
    text-align: left;
    border: 1px solid #006666;
    /* border-radius: 4px; */
    position: absolute;
    z-index: 1;
    margin-left: 4px;
    padding: 2px 3px;
    visibility: hidden;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
    visibility: visible;
}

span.ns_scope {
    color: #aaaaaa;
}

span.ns_scope a:link, span.ns_scope a:visited {
  text-decoration: none;
  color: #aaaaaa;

}

li {
  margin-top: 0.5em;
}

span.ns_scope a:hover {
  text-decoration: none;
  color: #666666;
}

table {
  margin: 1em;
  margin-top: 0.5em;
  border: thin solid;
  border-collapse: collapse;
  border-color: #808080;
  padding: 4px;
}

td {
  border: thin solid;
  border-color: #808080;
  vertical-align: top;
  font-size: 93%;
  padding: 0.3em;
  padding-top: 0.1em;
}
th {
  border: thin solid;
  border-color: #808080;
  padding: 0.3em;
  padding-top: 0.1em;
  background-color: #CCCCCC;
}

dt, dd {
   font-size: 93%;
}

h1.ruff {
    background-color: #006666;
    color: #ffffff;
    padding-left: 0.2em;
    font-family: "Times New Roman", serif;
}
h2.ruff {
    font-variant: small-caps;
    color: #006666;
    font-family: "Times New Roman", serif;
}

h3.ruff, h4.ruff, h5.ruff, h6.ruff {
    color: #006666;
}
h5.ruff {
    font-style: italic;
    font-weight: normal;
}
h6.ruff {
    font-weight: normal;
}
h3.ruffclass, h3.ruffproc, h3.ruffmethod,
h4.ruffclass, h4.ruffproc, h4.ruffmethod,
h5.ruffclass, h5.ruffproc, h5.ruffmethod {
    border-bottom: thin solid #006666;
    color: #006666;
    margin-bottom: 0.2em;
}

pre {
    background-color: #eeeeee;
    margin-top: 1em;
    margin-left: 1em;
    padding: 5px;
    font-family: Consolas, "Courier New", monospace;
    /* width: max-content; --- to leave footsteps */ overflow: auto;
    font-size: smaller;
    line-height: 1.2em;
}

.ruff_dyn_src {
    display: none; /* Displayed via JS */
}

.ruff_synopsis {
    border: thin solid #cccccc;
    background: #eeeeee;
    font-size: smaller;
    font-family: Consolas, "Courier New", monospace;
    padding: 5px;
    margin: 0em 2em 1em;
}
.ruff_const, .ruff_cmd, ruff_defitem {
    font-weight: bold;
    font-family: Consolas, "Courier New", monospace;
}
.ruff_arg {
    font-style: italic;
    font-family: Consolas, "Courier New", monospace;
}

.ruff_source_link {
    font-size: smaller;
}
</style>
<script>function toggleSource( id )
{
    /* Copied from Rails */
    var elem
    var link

    if( document.getElementById )
    {
        elem = document.getElementById( id )
        link = document.getElementById( "l_" + id )
    }
    else if ( document.all )
    {
        elem = eval( "document.all." + id )
        link = eval( "document.all.l_" + id )
    }
    else
        return false;

    if( elem.style.display == "block" )
    {
        elem.style.display = "none"
        link.innerHTML = "Show source"
    }
    else
    {
        elem.style.display = "block"
        link.innerHTML = "Hide source"
    }
}
</script></head>
<meta name="author" content="aplsimple">
<meta name="description" content="aplsimple's home page">
<meta name="keywords" content="aplsimple,home">
<link rel="stylesheet" href="../../../en/zoo/style.css">
<style>
table{
background-color: #EEEEEE;
margin: 1%;
padding: 1%;
box-shadow: none;
filter: none;
}
</style>
<link rel="icon" type="image/jpg" href="../../../zoo/favicon.jpg">
<body>
<div id="wrapper">
<div name="divd1" ALIGN="CENTER"> <FONT SIZE=5em color=#b01c20><B>
<noscript>THIS PAGE IS NOT WORKING WITHOUT JAVASCRIPT!
<BR>
<BR>PLEASE, SWITCH ON JAVASCRIPT IN SETTINGS OF YOUR BROWSER AND RELOAD THE PAGE.
</noscript>
</B></FONT></div>
<div id='doc3' class='yui-t2'>
<script src="../../../zoo/funcs.js"></script>
<script src="../../../en/zoo/this.js"></script>
<section id=sec2>
<div id='hd' class='banner'>
<a style='text-decoration:none;' href='trimmer.html'>trimmer reference</a>
</div>
<div id='bd'><div id='yui-main'><div class='yui-b'><h1 class='ruff'><a name='::trimmer'></a>::trimmer<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>Trimming a Tcl source file off comments and whitespaces.</p>
<br><h2 class='ruff'><a name='::trimmer-Usage'></a>Usage<span class='tinylink'><a href='#::trimmer'>trimmer</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<pre class='ruff'>
tclsh trim.tcl [-i idir|ifile] [-o odir] [-r] [-f] [-n] [--] [app args]
</pre>
<p class='ruff'>where:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>idir</code></td><td class='ruff_defitem'>a directory of files to process (by default ./)</td></tr>
<tr><td class='ruff_defitem'><code>ifile</code></td><td class='ruff_defitem'>a file listing .tcl files       (#-comments disregarded)</td></tr>
<tr><td class='ruff_defitem'><code>odir</code></td><td class='ruff_defitem'>a directory of resulting files  (by default ../release)</td></tr>
<tr><td class='ruff_defitem'><code>app</code></td><td class='ruff_defitem'>an application to be run after trimming</td></tr>
<tr><td class='ruff_defitem'><code>args</code></td><td class='ruff_defitem'>optional arguments of <em>app</em></td></tr>
</table>
<p class='ruff'>The -i (or --input) can be multiple, -o (or --output) can not.</p>
<p class='ruff'>If -r (or --recursive) is set, the input directories are processed recursively. By default, they are processed non-recursively.</p>
<p class='ruff'>If -f (or --force) is set, the existing output file(s) will be rewritten. By default, the trim.tcl doesn't rewrite the existing file(s).</p>
<p class='ruff'>If -n (or --no) is set, no real changes made, supposed changes shown only.</p>
<p class='ruff'>The <em>trim.tcl</em> by no means changes the input file(s).</p>
<p class='ruff'>Example:</p>
<pre class='ruff'>
tclsh trim.tcl -i ./lib -o ./bin tclsh -f ./bin/main.tcl arg1 &quot;arg 2&quot;
</pre>
<br><h2 class='ruff'><a name='::trimmer-Limitations'></a>Limitations<span class='tinylink'><a href='#::trimmer'>trimmer</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>The <em>trim.tcl</em> sets the following limitations for the code processed:</p>
<p class='ruff'><strong>1.</strong> In general, multi-line strings should be double-quoted (not braced), because the braced strings would be trimmed. But there are two important exceptions: when <em>set</em> and <em>variable</em> commands use a braced string, it is not trimmed, e.g.</p>
<pre class='ruff'>
set str1 {
   Correct}       ;# equals to set str1 &quot;\n    Correct&quot;
variable str2 {
   Correct}       ;# equals to variable str2 &quot;\n    Correct&quot;
puts {
    Not correct}  ;# equals to puts &quot;Not correct&quot;
</pre>
<p class='ruff'><strong>2.</strong> Comments after &quot;{&quot; should begin with &quot;;#&quot;, e.g.</p>
<pre class='ruff'>
while {true} {  ;# infinite cycle
}
</pre>
<p class='ruff'><strong>3.</strong> <em>List</em> or <em>switch</em> commands can contain comments which are not considered to be meaningful items, e.g.</p>
<pre class='ruff'>
switch $option {
   # it's a comment (and the error in standard Tcl switch)
   -opt1 {
     puts &quot;-opt1 processed&quot;
   }
   # ...
}
</pre>
<p class='ruff'>The 1st limitation is rarely encountered and easily overcome with \n escape sequences.</p>
<p class='ruff'>The last two limitations are actually the advantages of the utility.</p>
<p class='ruff'>The 2nd requires a bit more discipline of coders.</p>
<p class='ruff'>The 3rd eliminates Tcl comment freaks.</p>
<p class='ruff'>The <em>trim.tcl</em> and <em>trim_test.tcl</em> set examples of this in action:</p>
<pre class='ruff'>
tclsh trim.tcl -f -o trimmed

tclsh trim_test.tcl -f -o trimmed

tclsh trimmed/trim.tcl -f -o trimmed

tclsh trimmed/trim_test.tcl -f -o trimmed
</pre>
<br><h2 class='ruff'><a name='::trimmer-License'></a>License<span class='tinylink'><a href='#::trimmer'>trimmer</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>MIT.</p>
<br><h2 class='ruff'><a name='::trimmer-Commands'></a>Commands<span class='tinylink'><a href='#::trimmer'>trimmer</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><h4 class='ruffproc'><a name='::trimmer::countChar'>countChar</a><span class='ns_scope'> [<a href="#::trimmer" title="::trimmer" class='ruff_cmd'>::trimmer</a>]</span><span class='tinylink'><a href='#::trimmer'>trimmer</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Counts a character in a string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>countChar</span> <span class='ruff_arg'>str char</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>str</code></code></td><td class='ruff_defitem'>a string</td></tr>
<tr><td class='ruff_defitem'><code><code>char</code></code></td><td class='ruff_defitem'>a character</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a number of non-escaped occurences of character <em>char</em> in string <em>str</em>.</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="https://wiki.tcl-lang.org/page/Reformatting+Tcl+code+indentation" >[wiki.tcl-lang.org</a>]</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_1' href="javascript:toggleSource('1')">Show source</a></p>
<div id='1' class='ruff_dyn_src'><pre>proc ::trimmer::countChar {str char} {


    # Counts a character in a string.
    #   str - a string
    #   char - a character
    #
    # Returns a number of non-escaped occurences of character *char* in
    # string *str*.
    #
    # See also:
    # [wiki.tcl-lang.org](https://wiki.tcl-lang.org/page/Reformatting+Tcl+code+indentation)

    set icnt 0
    while {[set idx [string first $char $str]] &gt;= 0} {
      set backslashes 0
      set nidx $idx
      while {[string equal [string index $str [incr nidx -1]] \\]} {
        incr backslashes
      }
      if {$backslashes % 2 == 0} { incr icnt }
      set str [string range $str [incr idx] end]
    }
    return $icnt
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::trimFile'>trimFile</a><span class='ns_scope'> [<a href="#::trimmer" title="::trimmer" class='ruff_cmd'>::trimmer</a>]</span><span class='tinylink'><a href='#::trimmer'>trimmer</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Trims an input file and writes a result to an output file.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>trimFile</span> <span class='ruff_arg'>finp fout ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>finp</code></code></td><td class='ruff_defitem'>input file name</td></tr>
<tr><td class='ruff_defitem'><code><code>fout</code></code></td><td class='ruff_defitem'>output file name</td></tr>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>additional parameters (so far not used)</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_2' href="javascript:toggleSource('2')">Show source</a></p>
<div id='2' class='ruff_dyn_src'><pre>proc ::trimmer::trimFile {finp fout args} {


    # Trims an input file and writes a result to an output file.
    #   finp - input file name
    #   fout - output file name
    #   args - additional parameters (so far not used)

    if { [catch {set chani [open &quot;$finp&quot; &quot;r&quot;]} e] } {
      batchio::onError $e 0
      return
    }
    if { [catch {set chano [open &quot;$fout&quot; &quot;w&quot;]} e] } {
      close $chani
      batchio::onError $e 0
      return
    }
    set brace [set braceST -1]
    set nquote 0
    while {[gets $chani line] &gt;= 0} {
      if {$nquote} {
        set ic -1  ;# multi-line quoted string
      } else {
        if {$braceST&lt;1} {  ;# check a braced string at some important commands
          foreach cmd {set variable} {
            if {[set braceST [regexp &quot;^\\s*$cmd\\s+\\S+\\s+\{&quot; $line]]} {
              set line &quot;\n[string trimleft $line]&quot;
              set cbrc 0
              break
            }
          }
        }
        if {$braceST&gt;0} {  ;# check matching left/right braces
          incr cbrc [expr {[countChar $line \{] - [countChar $line \}]}]
          if {$cbrc&lt;=0} {
            set brace [set braceST -1]
          } else {
            puts $chano $line
            continue
          }
        }
        set line [string trimleft $line &quot; \t&quot;]
        if {$brace&gt;=0 &amp;&amp; [string index $line 0] in {&quot;&quot; &quot;#&quot;}} continue
        set ic [string first &quot;;#&quot; $line]   ;# if ;# in string, ignore the rest
        if {[countChar [string range $line 0 $ic] \&quot;] % 2} { set ic -1 }
      }
      if {$ic==0} continue  ;# for comments beginning with &quot;;#&quot;
      if {$ic&gt;0} { set line [string range $line 0 [expr {$ic-1}]] }
      set line [string trimright $line]
      set prevbrace $brace
      set brace [expr {$line eq &quot;\}&quot; ? 1 : 0}]
      if {($prevbrace==1 || $prevbrace==0) &amp;&amp; !$brace} { puts $chano &quot;&quot; }
      if {[set _ [expr {[countChar $line \&quot;] % 2}]]} {
        set nquote [expr {!$nquote}]
      }
      if {[set _ [string index $line end]] eq &quot;\{&quot;} {
        set brace 2           ;# line ending with \{ will join with next line
      } elseif {$_ eq &quot;\\&quot;} {
        set brace 2           ;# line ending with \ will join with next line
        if {$nquote} {        ;# but &quot;\&quot; should be removed
          set line [string range $line 0 end-1]
        } else {
          set line &quot;[string trimright [string range $line 0 end-1]] &quot;
        }
      }
      puts -nonewline $chano $line
    }
    puts $chano &quot;\n#by trimmer&quot;
    close $chani
    close $chano
}</pre></div>
</div><br><br><h1 class='ruff'><a name='::trimmer::batchio'></a>::trimmer::batchio<span class='tinylink'><a href='#top'>Top</a></span></h1>
<div style='clear:both;'></div>
<p class='ruff'>Processing a batch of input files to make appropriate output files.</p>
<br><h2 class='ruff'><a name='::trimmer::batchio-Usage'></a>Usage<span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<pre class='ruff'>
tclsh script.tcl [-i idir|ifile] [-o odir] [-r] [-f] [-n] [--] [app args]
</pre>
<p class='ruff'>where</p>
<p class='ruff'><em>script.tcl</em> is a Tcl script sourcing <em>batchio.tcl</em> to call its 'main' proc</p>
<p class='ruff'>arguments are:</p>
<table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code>idir</code></td><td class='ruff_defitem'>a directory of files to process (by default ./)</td></tr>
<tr><td class='ruff_defitem'><code>ifile</code></td><td class='ruff_defitem'>a file listing .tcl files       (#-comments disregarded)</td></tr>
<tr><td class='ruff_defitem'><code>odir</code></td><td class='ruff_defitem'>a directory of resulting files  (by default ../release)</td></tr>
<tr><td class='ruff_defitem'><code>app</code></td><td class='ruff_defitem'>an application to be run after trimming</td></tr>
<tr><td class='ruff_defitem'><code>args</code></td><td class='ruff_defitem'>optional arguments of <em>app</em></td></tr>
</table>
<p class='ruff'>The -i (or --input) can be multiple, -o (or --output) can not.</p>
<p class='ruff'>If -r (or --recursive) is set, the input directories are processed recursively. By default, they are processed non-recursively.</p>
<p class='ruff'>If -f (or --force) is set, the existing output file(s) will be rewritten. By default, the script.tcl doesn't rewrite the existing file(s).</p>
<p class='ruff'>If -n (or --no) is set, no real changes made, supposed changes shown only.</p>
<p class='ruff'>Example:</p>
<pre class='ruff'>
tclsh trim.tcl -i ./lib -o ./bin tclsh -f ./bin/main.tcl arg1 &quot;arg 2&quot;
</pre>
<br><h2 class='ruff'><a name='::trimmer::batchio-License'></a>License<span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<p class='ruff'>MIT.</p>
<br><h2 class='ruff'><a name='::trimmer::batchio-Commands'></a>Commands<span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h2>
<div style='clear:both;'></div>
<br><h4 class='ruffproc'><a name='::trimmer::batchio::doFile'>doFile</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Prepares and does a call of procedure to process two files.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>doFile</span> <span class='ruff_arg'>procN noact pdirN root finp odir rm ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>procN</code></code></td><td class='ruff_defitem'>name of procedure to process two files</td></tr>
<tr><td class='ruff_defitem'><code><code>noact</code></code></td><td class='ruff_defitem'>if true, no output file</td></tr>
<tr><td class='ruff_defitem'><code><code>pdirN</code></code></td><td class='ruff_defitem'>variable's name of previous input directory</td></tr>
<tr><td class='ruff_defitem'><code><code>root</code></code></td><td class='ruff_defitem'>root of input directory</td></tr>
<tr><td class='ruff_defitem'><code><code>finp</code></code></td><td class='ruff_defitem'>input file</td></tr>
<tr><td class='ruff_defitem'><code><code>odir</code></code></td><td class='ruff_defitem'>output directory</td></tr>
<tr><td class='ruff_defitem'><code><code>rm</code></code></td><td class='ruff_defitem'>flag 'rewrite the existing output file or not'</td></tr>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>other arguments</td></tr>
</table>
<h5 class='ruff'>Description</h5><p class='ruff'>If <em>noact</em> is true, no outputs are actually made (to show only).</p>
<p class='ruff'>The <em>pdirN</em> is used to show an input directory when changed. It needs only to be initialized with &quot;&quot;.</p>
<p class='ruff'>The <em>root</em> is a root name of input directory that is used to make the output path from the <em>odir</em> and a relative (to <em>root</em>) part of <em>finp</em>.</p>
<p class='ruff'>If <em>root</em> is empty, an input file is set instead of a directory, so the output path has no relative part.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_3' href="javascript:toggleSource('3')">Show source</a></p>
<div id='3' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::doFile {procN noact pdirN root finp odir rm args} {


    # Prepares and does a call of procedure to process two files.
    #   procN - name of procedure to process two files
    #   noact - if true, no output file
    #   pdirN - variable's name of previous input directory
    #   root  - root of input directory
    #   finp  - input file
    #   odir  - output directory
    #   rm    - flag 'rewrite the existing output file or not'
    #   args  - other arguments
    #
    # If *noact* is true, no outputs are actually made (to show only).
    #
    # The *pdirN* is used to show an input directory when changed.
    # It needs only to be initialized with &quot;&quot;.
    #
    # The *root* is a root name of input directory that is used to make
    # the output path from the *odir* and a relative (to *root*) part
    # of *finp*.
    #
    # If *root* is empty, an input file is set instead of a directory,
    # so the output path has no relative part.

    upvar $pdirN pdir
    if {$root ne &quot;&quot;} {
      # input subdir
      set idir [file dirname [file normalize $finp]]
      set idir [string range $idir [string length $root]+1 end]
      # outdir + input subdir + input filename = output file
      set fout [file join $odir $idir [file tail $finp]]
    } else {
      set fout [file join $odir [file tail $finp]]
    }
    set dinp [file dirname $finp]
    set dout [file normalize $odir]
    if {$pdir ne $dinp} {
      set pdir $dinp
      puts &quot; Input directory : $dinp&quot;
    }
    set fdisp &quot;...[string range $fout [string length $dout] end]&quot;
    append fdisp [string repeat &quot; &quot; 80]
    puts -nonewline &quot;     Output file : [string range $fdisp 0 38]&quot;
    if { &quot;[file normalize $finp]&quot; eq &quot;[file normalize $fout]&quot; } {
      onError &quot;-       the same.&quot; 0
      return
    }
    if { !$rm &amp;&amp; [file exists $fout] } {
      onError &quot;- already exists.&quot; 0
      return
    }
    puts &quot;&quot;
    if {$noact} return
    catch {file mkdir [file dirname $fout]}
    $procN $finp $fout {*}$args
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::batchio::getInputFilesList'>getInputFilesList</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Gets a list of input files.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>getInputFilesList</span> <span class='ruff_arg'>ilistN idir globPatt recursive</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>ilistN</code></code></td><td class='ruff_defitem'>a name of variable to contain the resulting list</td></tr>
<tr><td class='ruff_defitem'><code><code>idir</code></code></td><td class='ruff_defitem'>a name of input directory / file</td></tr>
<tr><td class='ruff_defitem'><code><code>globPatt</code></code></td><td class='ruff_defitem'>glob pattern for files to be processed</td></tr>
<tr><td class='ruff_defitem'><code><code>recursive</code></code></td><td class='ruff_defitem'>a boolean to scan directories recursively</td></tr>
</table>
<h5 class='ruff'>Return value</h5><p class='ruff'>Returns a list of <em>roots</em>, i.e. root directory names for scanned directories or &quot;&quot; for files included directly.</p>
<h5 class='ruff'>Description</h5><p class='ruff'>If <em>idir</em> is a directory, it is scanned for files.</p>
<p class='ruff'>If <em>idir</em> is a file, it should contain a list of directories (to scan for files to be included in the list) and/or files (to be included in the list directly).</p>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="#::trimmer::batchio::recurseProc" title="recurseProc" class='ruff_cmd'>recurseProc</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_4' href="javascript:toggleSource('4')">Show source</a></p>
<div id='4' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::getInputFilesList {ilistN idir globPatt recursive} {


    # Gets a list of input files.
    #   ilistN    - a name of variable to contain the resulting list
    #   idir      - a name of input directory / file
    #   globPatt  - glob pattern for files to be processed
    #   recursive - a boolean to scan directories recursively
    #
    # If *idir* is a directory, it is scanned for files.
    #
    # If *idir* is a file, it should contain a list of directories (to scan
    # for files to be included in the list) and/or files (to be included in
    # the list directly).
    #
    # Returns a list of *roots*, i.e. root directory names for scanned
    # directories or &quot;&quot; for files included directly.
    #
    # See also: recurseProc

    if {![file exist $idir]} {
      onError &quot;Input directory/file \&quot;$idir\&quot; does not exist.&quot;
    }
    set root {}
    if {[file isfile $idir]} {
      # it's a file containing a list of files and/or directories
      set ch [open $idir]
      foreach fin [split [read $ch] \n] {
        set fin [string trim $fin]
        if {$fin ne &quot;&quot; &amp;&amp; [file exists $fin]} {
          if {[file isfile $fin]} {      ;# a file
            lappend $ilistN $fin
            lappend root &quot;&quot;
          } else {                       ;# a directory
            set [namespace current]::iltmp {}
            if {$recursive} {
              recurseProc &quot;lappend [namespace current]::iltmp&quot; $fin $globPatt
            } else {
              set [namespace current]::iltmp  [glob -nocomplain [file join $fin $globPatt]]
            }
            set rdir  [file normalize $fin]
            foreach f [set [namespace current]::iltmp] {
              lappend $ilistN $f
              lappend root $rdir
            }
            unset [namespace current]::iltmp
          }
        }
      }
    } else {
      if {$recursive} {
        recurseProc &quot;lappend $ilistN&quot; $idir $globPatt
      } else {
        lappend $ilistN {*}[glob -nocomplain [file join $idir $globPatt]]
      }
      lappend root [file normalize $idir]
    }
    return $root
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::batchio::main'>main</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Main procedure of batchio.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>main</span> <span class='ruff_arg'>procN globPatt options ?args?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>procN</code></code></td><td class='ruff_defitem'>name of procedure to process two files</td></tr>
<tr><td class='ruff_defitem'><code><code>globPatt</code></code></td><td class='ruff_defitem'>glob pattern for files to be processed</td></tr>
<tr><td class='ruff_defitem'><code><code>options</code></code></td><td class='ruff_defitem'>list of {opt optshort}, additional options</td></tr>
<tr><td class='ruff_defitem'><code><code>args</code></code></td><td class='ruff_defitem'>arguments passed to script.tcl, containing switches and values:</td></tr>
<tr><td class='ruff_defitem'><code><code>--</code></code></td><td class='ruff_defitem'>to end the switches and begin a command to run</td></tr>
<tr><td class='ruff_defitem'><code><code>-f</code></code></td><td class='ruff_defitem'>(or --force) a flag to rewrite existing output files</td></tr>
<tr><td class='ruff_defitem'><code><code>-i</code></code></td><td class='ruff_defitem'>(or --input) input directory or file of processed list</td></tr>
<tr><td class='ruff_defitem'><code><code>-n</code></code></td><td class='ruff_defitem'>(or --no) a flag to show output files only, without making</td></tr>
<tr><td class='ruff_defitem'><code><code>-o</code></code></td><td class='ruff_defitem'>(or --output) output directory</td></tr>
<tr><td class='ruff_defitem'><code><code>-r</code></code></td><td class='ruff_defitem'>(or --recursive) a flag to scan directories recursively</td></tr>
<tr><td class='ruff_defitem'><code><code>rest</code></code></td><td class='ruff_defitem'>resting arguments are a command to run and its arguments</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_5' href="javascript:toggleSource('5')">Show source</a></p>
<div id='5' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::main {procN globPatt options args} {


    # Main procedure of batchio.
    #   procN - name of procedure to process two files
    #   globPatt - glob pattern for files to be processed
    #   options  - list of {opt optshort}, additional options
    #   args - arguments passed to script.tcl, containing switches and values:
    #   -i   - (or --input) input directory or file of processed list
    #   -o   - (or --output) output directory
    #   -r   - (or --recursive) a flag to scan directories recursively
    #   -f   - (or --force) a flag to rewrite existing output files
    #   -n   - (or --no) a flag to show output files only, without making
    #   --   - to end the switches and begin a command to run
    #   rest - resting arguments are a command to run and its arguments

    underLine

    # when run without arguments, put the synopsis
    if {![set ac [llength $args]]} {synopsis; underLine }

    # get arguments and check if the arguments are correct
    set mydir [file dirname [info script]]
    set err [set remove [set recursive [set noact false]]]
    lassign &quot;&quot; iopt odir mfile margs addargs
    for {set i 0} {$i&lt;$ac} {incr i} {
      lassign [lrange $args $i end] opt val
      if {$opt eq &quot;--&quot;} {
        set mfile $val
        incr i
      } elseif {$mfile ne &quot;&quot;} {  ;# after an application, its arguments go
        lappend margs $opt
      } else {                   ;# here the batchio options go
        switch $opt {
          --input - -i {
             lappend iopt $val
             incr i
             }
          --output - -o {
             if {$odir ne &quot;&quot;} { onError &quot;--output argument duplicated&quot; }
             set odir $val
             incr i
             }
          --recursive - -r {
             if {$recursive} { onError &quot;--recursive argument duplicated&quot; }
             set recursive true
             }
          --force - -f {
             if {$remove} { onError &quot;--force argument duplicated&quot; }
             set remove true
             }
          --no - -n {
             if {$noact} { onError &quot;--no argument duplicated&quot; }
             set noact true
             }
          default {
            set isapp true
            set i2 0
            foreach {o osh} $options {
              if {$opt in &quot;$o $osh&quot;} {
                set isapp false
                lset options $i2 {}
                lappend addargs $val
                incr i
                break
              }
              incr i2
            }
            if {$isapp} { set mfile $opt }
          }
        }
      }
    }
    if {$iopt eq &quot;&quot;} { set iopt ./ }
    if {$odir eq &quot;&quot;} { set odir ../release }
    set odir [file normalize $odir]
    if {[file isfile $odir]} { onError &quot;\&quot;$odir\&quot; is not a directory.&quot; }

    # get the input files list from the list of input directories and/or files
    set ilistALL [set rootlistALL {}]
    set tmpl [namespace current]::ilistTmp
    foreach idir $iopt {
      set $tmpl {}
      set rootlist [getInputFilesList $tmpl $idir $globPatt $recursive]
      lappend ilistALL {*}[set $tmpl]
      lappend rootlistALL {*}$rootlist
      unset $tmpl
    }

    # process all files
    puts &quot; OUTPUT DIRECTORY: $odir&quot;
    underLine
    set pdir &quot;&quot;
    lassign $rootlistALL root
    foreach fin $ilistALL rt $rootlistALL {
      if {$rt ne &quot;&quot;} { set root $rt }
      set fin [file normalize $fin]
      if {[file isfile $fin]} {
        doFile $procN $noact pdir $root $fin $odir $remove {*}$addargs
      }
    }
    underLine

    # run a command if set
    set dispargs &quot;&quot;
    foreach a $margs {
      if {[llength $a]&gt;1} {set a &quot;\&quot;$a\&quot;&quot;}
      append dispargs &quot;$a &quot;
    }
    if {$noact} {
      puts &quot; Supposed run: \&quot;$mfile\&quot; $dispargs&quot;
    } elseif {$mfile ne &quot;&quot;} {
      set err &quot;&quot;
      if {[set comm [auto_execok $mfile]] eq &quot;&quot;} {
        set err &quot; Not found: $mfile&quot;
      }
      if {$err ne &quot;&quot; || [catch {exec {*}$comm {*}$margs } err]} {
        onError &quot;Run:\n   \&quot;$mfile\&quot; $dispargs\n$err&quot; 0
      }
    }
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::batchio::onError'>onError</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shows an error and optionally performs <em>exit</em>.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>onError</span> <span class='ruff_arg'>?err? ?doexit?</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>err</code></code></td><td class='ruff_defitem'>optional error message (empty by default, to put the synopsis) Optional, default <code>&quot;&quot;</code>.</td></tr>
<tr><td class='ruff_defitem'><code><code>doexit</code></code></td><td class='ruff_defitem'>optional boolean flag to perform <em>exit</em> (true by default) Optional, default <code>true</code>.</td></tr>
</table>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_6' href="javascript:toggleSource('6')">Show source</a></p>
<div id='6' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::onError {{err {}} {doexit true}} {


    # Shows an error and optionally performs *exit*.
    #   err - optional error message (empty by default, to put the synopsis)
    #   doexit - optional boolean flag to perform *exit* (true by default)

    set err [string trim $err]
    if {$doexit} {
      synopsis
      if {$err != &quot;&quot;} { underLine; puts &quot; $err&quot; }
      underLine
      exit
    }
    puts &quot; $err&quot;
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::batchio::recurseProc'>recurseProc</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Applies a command to files of a directory, recursively.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>recurseProc</span> <span class='ruff_arg'>procf dirname pattns</span></div>
<h5 class='ruff'>Parameters</h5><table class='ruff_deflist'>
<tr><td class='ruff_defitem'><code><code>procf</code></code></td><td class='ruff_defitem'>a command to apply</td></tr>
<tr><td class='ruff_defitem'><code><code>dirname</code></code></td><td class='ruff_defitem'>a directory to scan</td></tr>
<tr><td class='ruff_defitem'><code><code>pattns</code></code></td><td class='ruff_defitem'>glob patterns of files (devided by &quot; &quot; or &quot;,&quot;)</td></tr>
</table>
<h5 class='ruff'>See also</h5><p class='ruff'><a href="#::trimmer::batchio::getInputFilesList" title="getInputFilesList" class='ruff_cmd'>getInputFilesList</a></p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_7' href="javascript:toggleSource('7')">Show source</a></p>
<div id='7' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::recurseProc {procf dirname pattns} {


    # Applies a command to files of a directory, recursively.
    #   procf   - a command to apply
    #   dirname - a directory to scan
    #   pattns  - glob patterns of files (devided by &quot; &quot; or &quot;,&quot;)
    #
    # See also: getInputFilesList

    foreach dir [glob -nocomplain [file join $dirname *]] {
      if {[file isdirectory $dir]} { recurseProc $procf $dir $pattns }
    }
    # no dirs anymore
    foreach filetempl [split $pattns &quot;, &quot;] {
      if {![catch {  set files [glob -nocomplain [file join $dirname $filetempl]]}]} {
        foreach f $files { {*}$procf [file normalize $f] }
      }
    }
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::batchio::synopsis'>synopsis</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Shows a syntax and a usage of namespace.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>synopsis</span> </div>
<h5 class='ruff'>Description</h5><p class='ruff'>If <em>_ruff_preamble</em> is defined in the parent namespace, puts it. Otherwise puts its own <em>_ruff_preamble</em>.</p>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_8' href="javascript:toggleSource('8')">Show source</a></p>
<div id='8' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::synopsis {} {


    # Shows a syntax and a usage of namespace.
    #
    # If *_ruff_preamble* is defined in the parent namespace, puts it.
    # Otherwise puts its own *_ruff_preamble*.

    variable SynShown
    if {$SynShown} exit {set SynShown true}
    set preamble [namespace parent]::_ruff_preamble
    if {![info exist $preamble]} {
      set preamble [namespace current]::_ruff_preamble
    }
    puts [string map [list \\\{ \{] [set $preamble]]\n
}</pre></div>
</div><br><h4 class='ruffproc'><a name='::trimmer::batchio::underLine'>underLine</a><span class='ns_scope'> [<a href="#::trimmer::batchio" title="::trimmer::batchio" class='ruff_cmd'>::trimmer::batchio</a>]</span><span class='tinylink'><a href='#::trimmer::batchio'>batchio</a>, <a href='#top'>Top</a></span></h4>
<div style='clear:both;'></div>
<p class='ruff'>Puts out an underlining string.</p>
<div class='ruff_synopsis'><span class='ruff_cmd'>underLine</span> </div>
<div class='ruff_source'><p class='ruff_source_link'><a id='l_9' href="javascript:toggleSource('9')">Show source</a></p>
<div id='9' class='ruff_dyn_src'><pre>proc ::trimmer::batchio::underLine {} {


    # Puts out an underlining string.

    puts &quot; [string repeat - 75]&quot;
}</pre></div>
</div></div></div><div class='yui-b navbox'><h1><a href='#::trimmer'>trimmer</a></h1><h2><a href='#::trimmer-Usage'>Usage</a></h2><h2><a href='#::trimmer-Limitations'>Limitations</a></h2><h2><a href='#::trimmer-License'>License</a></h2><h2><a href='#::trimmer-Commands'>Commands</a></h2><h4 class='tooltip'><a href='#::trimmer::countChar'>countChar</a><span class='tooltiptext'>Counts a character in a string.
</span></h4><h4 class='tooltip'><a href='#::trimmer::trimFile'>trimFile</a><span class='tooltiptext'>Trims an input file and writes a result to an output file.
</span></h4><h1><a href='#::trimmer::batchio'>trimmer::batchio</a></h1><h2><a href='#::trimmer::batchio-Usage'>Usage</a></h2><h2><a href='#::trimmer::batchio-License'>License</a></h2><h2><a href='#::trimmer::batchio-Commands'>Commands</a></h2><h4 class='tooltip'><a href='#::trimmer::batchio::doFile'>doFile</a><span class='tooltiptext'>Prepares and does a call of procedure to process two files.
</span></h4><h4 class='tooltip'><a href='#::trimmer::batchio::getInputFilesList'>getInputFilesList</a><span class='tooltiptext'>Gets a list of input files.
</span></h4><h4 class='tooltip'><a href='#::trimmer::batchio::main'>main</a><span class='tooltiptext'>Main procedure of batchio.
</span></h4><h4 class='tooltip'><a href='#::trimmer::batchio::onError'>onError</a><span class='tooltiptext'>Shows an error and optionally performs <em>exit</em>.
</span></h4><h4 class='tooltip'><a href='#::trimmer::batchio::recurseProc'>recurseProc</a><span class='tooltiptext'>Applies a command to files of a directory, recursively.
</span></h4><h4 class='tooltip'><a href='#::trimmer::batchio::synopsis'>synopsis</a><span class='tooltiptext'>Shows a syntax and a usage of namespace.
</span></h4><h4 class='tooltip'><a href='#::trimmer::batchio::underLine'>underLine</a><span class='tooltiptext'>Puts out an underlining string.
</span></h4></div></div><div id='ft'><div style='float: right;'><span id=spr2>Document generated by <a href="https://ruff.magicsplat.com">Ruff!</a></span></div>
</div>
</section>
<script>
  writeFooter('<a href="#" class="wikilink1" title="Table of Contents">aplsimple</a>\'s home page');
</script>
</div>
</div></body></html>
